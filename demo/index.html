<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script src="../dist/jsvm.js"></script>
    <script>
      // jsvm
      var executer = new jsvm.default({ name: 123 });

      // https://astexplorer.net/
      // 选择babylon编译，选择json，取出program对象
      /*
            var a = 1;
            console.log(this);
            function b(aa) {
              console.log(a + 1 + aa);
              return;
            }
            b(2);
      */
      var ast = {
        type: "Program",
        start: 0,
        end: 91,
        loc: {
          start: {
            line: 1,
            column: 0
          },
          end: {
            line: 7,
            column: 5
          }
        },
        sourceType: "module",
        body: [
          {
            type: "VariableDeclaration",
            start: 0,
            end: 10,
            loc: {
              start: {
                line: 1,
                column: 0
              },
              end: {
                line: 1,
                column: 10
              }
            },
            declarations: [
              {
                type: "VariableDeclarator",
                start: 4,
                end: 9,
                loc: {
                  start: {
                    line: 1,
                    column: 4
                  },
                  end: {
                    line: 1,
                    column: 9
                  }
                },
                id: {
                  type: "Identifier",
                  start: 4,
                  end: 5,
                  loc: {
                    start: {
                      line: 1,
                      column: 4
                    },
                    end: {
                      line: 1,
                      column: 5
                    }
                  },
                  name: "a"
                },
                init: {
                  type: "Literal",
                  start: 8,
                  end: 9,
                  loc: {
                    start: {
                      line: 1,
                      column: 8
                    },
                    end: {
                      line: 1,
                      column: 9
                    }
                  },
                  value: 1,
                  rawValue: 1,
                  raw: "1"
                }
              }
            ],
            kind: "var"
          },
          {
            type: "ExpressionStatement",
            start: 11,
            end: 29,
            loc: {
              start: {
                line: 2,
                column: 0
              },
              end: {
                line: 2,
                column: 18
              }
            },
            expression: {
              type: "CallExpression",
              start: 11,
              end: 28,
              loc: {
                start: {
                  line: 2,
                  column: 0
                },
                end: {
                  line: 2,
                  column: 17
                }
              },
              callee: {
                type: "MemberExpression",
                start: 11,
                end: 22,
                loc: {
                  start: {
                    line: 2,
                    column: 0
                  },
                  end: {
                    line: 2,
                    column: 11
                  }
                },
                object: {
                  type: "Identifier",
                  start: 11,
                  end: 18,
                  loc: {
                    start: {
                      line: 2,
                      column: 0
                    },
                    end: {
                      line: 2,
                      column: 7
                    }
                  },
                  name: "console"
                },
                property: {
                  type: "Identifier",
                  start: 19,
                  end: 22,
                  loc: {
                    start: {
                      line: 2,
                      column: 8
                    },
                    end: {
                      line: 2,
                      column: 11
                    }
                  },
                  name: "log"
                },
                computed: false
              },
              arguments: [
                {
                  type: "ThisExpression",
                  start: 23,
                  end: 27,
                  loc: {
                    start: {
                      line: 2,
                      column: 12
                    },
                    end: {
                      line: 2,
                      column: 16
                    }
                  }
                }
              ]
            }
          },
          {
            type: "FunctionDeclaration",
            start: 30,
            end: 85,
            loc: {
              start: {
                line: 3,
                column: 0
              },
              end: {
                line: 6,
                column: 1
              }
            },
            id: {
              type: "Identifier",
              start: 39,
              end: 40,
              loc: {
                start: {
                  line: 3,
                  column: 9
                },
                end: {
                  line: 3,
                  column: 10
                }
              },
              name: "b"
            },
            generator: false,
            expression: false,
            async: false,
            params: [
              {
                type: "Identifier",
                start: 41,
                end: 43,
                loc: {
                  start: {
                    line: 3,
                    column: 11
                  },
                  end: {
                    line: 3,
                    column: 13
                  }
                },
                name: "aa"
              }
            ],
            body: {
              type: "BlockStatement",
              start: 45,
              end: 85,
              loc: {
                start: {
                  line: 3,
                  column: 15
                },
                end: {
                  line: 6,
                  column: 1
                }
              },
              body: [
                {
                  type: "ExpressionStatement",
                  start: 49,
                  end: 73,
                  loc: {
                    start: {
                      line: 4,
                      column: 2
                    },
                    end: {
                      line: 4,
                      column: 26
                    }
                  },
                  expression: {
                    type: "CallExpression",
                    start: 49,
                    end: 72,
                    loc: {
                      start: {
                        line: 4,
                        column: 2
                      },
                      end: {
                        line: 4,
                        column: 25
                      }
                    },
                    callee: {
                      type: "MemberExpression",
                      start: 49,
                      end: 60,
                      loc: {
                        start: {
                          line: 4,
                          column: 2
                        },
                        end: {
                          line: 4,
                          column: 13
                        }
                      },
                      object: {
                        type: "Identifier",
                        start: 49,
                        end: 56,
                        loc: {
                          start: {
                            line: 4,
                            column: 2
                          },
                          end: {
                            line: 4,
                            column: 9
                          }
                        },
                        name: "console"
                      },
                      property: {
                        type: "Identifier",
                        start: 57,
                        end: 60,
                        loc: {
                          start: {
                            line: 4,
                            column: 10
                          },
                          end: {
                            line: 4,
                            column: 13
                          }
                        },
                        name: "log"
                      },
                      computed: false
                    },
                    arguments: [
                      {
                        type: "BinaryExpression",
                        start: 61,
                        end: 71,
                        loc: {
                          start: {
                            line: 4,
                            column: 14
                          },
                          end: {
                            line: 4,
                            column: 24
                          }
                        },
                        left: {
                          type: "BinaryExpression",
                          start: 61,
                          end: 66,
                          loc: {
                            start: {
                              line: 4,
                              column: 14
                            },
                            end: {
                              line: 4,
                              column: 19
                            }
                          },
                          left: {
                            type: "Identifier",
                            start: 61,
                            end: 62,
                            loc: {
                              start: {
                                line: 4,
                                column: 14
                              },
                              end: {
                                line: 4,
                                column: 15
                              }
                            },
                            name: "a"
                          },
                          operator: "+",
                          right: {
                            type: "Literal",
                            start: 65,
                            end: 66,
                            loc: {
                              start: {
                                line: 4,
                                column: 18
                              },
                              end: {
                                line: 4,
                                column: 19
                              }
                            },
                            value: 1,
                            rawValue: 1,
                            raw: "1"
                          }
                        },
                        operator: "+",
                        right: {
                          type: "Identifier",
                          start: 69,
                          end: 71,
                          loc: {
                            start: {
                              line: 4,
                              column: 22
                            },
                            end: {
                              line: 4,
                              column: 24
                            }
                          },
                          name: "aa"
                        }
                      }
                    ]
                  }
                },
                {
                  type: "ReturnStatement",
                  start: 76,
                  end: 83,
                  loc: {
                    start: {
                      line: 5,
                      column: 2
                    },
                    end: {
                      line: 5,
                      column: 9
                    }
                  },
                  argument: null
                }
              ]
            }
          },
          {
            type: "ExpressionStatement",
            start: 86,
            end: 91,
            loc: {
              start: {
                line: 7,
                column: 0
              },
              end: {
                line: 7,
                column: 5
              }
            },
            expression: {
              type: "CallExpression",
              start: 86,
              end: 90,
              loc: {
                start: {
                  line: 7,
                  column: 0
                },
                end: {
                  line: 7,
                  column: 4
                }
              },
              callee: {
                type: "Identifier",
                start: 86,
                end: 87,
                loc: {
                  start: {
                    line: 7,
                    column: 0
                  },
                  end: {
                    line: 7,
                    column: 1
                  }
                },
                name: "b"
              },
              arguments: [
                {
                  type: "Literal",
                  start: 88,
                  end: 89,
                  loc: {
                    start: {
                      line: 7,
                      column: 2
                    },
                    end: {
                      line: 7,
                      column: 3
                    }
                  },
                  value: 2,
                  rawValue: 2,
                  raw: "2"
                }
              ]
            }
          }
        ]
      };

      executer.execute(ast);
    </script>
  </body>
</html>
